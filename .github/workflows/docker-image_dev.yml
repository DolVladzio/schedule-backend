name: "Dev: Build backend docker image and push to a GCR"

on:
  push:
    branches: [ dev ]
  workflow_dispatch:

jobs:
  frontend:
    name: Build and Push Backend Docker Image
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Code
      uses: actions/checkout@v3



    - name: Trigger the Ansible runner
      uses: peter-evans/repository-dispatch@v3
      with:
        token: ${{ secrets.ACCESS_REPO_TOKEN }}
        repository: DolVladzio/schedule-Ansible
        event-type: deploy-backend-dev
        client-payload: |
          {
            "backend_image": "${{ env.BACKEND_IMAGE }}",
            "env": "dev"
          }
